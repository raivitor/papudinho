<!DOCTYPE html>
<html>
  <head>
    <!-- <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>-->
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title>Papudinho</title>

    <link href="lib/ionic/css/ionic.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <script src="lib/ionic/js/ionic.bundle.js"></script>
    
    <!-- cordova script (this will be a 404 during development) -->
    <script src="cordova.js"></script>
    <script src="js/upload.js"></script>
    <script src="js/app.js"></script>
    <script src="js/Ctrl_AddBar.js"></script>
    <script src="js/Ctrl_AddAmigo.js"></script>
    <script src="js/Ctrl_Amigos.js"></script>
    <script src="js/Ctrl_Back.js"></script>
    <script src="js/Ctrl_Bares.js"></script>
    <script src="js/Ctrl_CadastroForm.js"></script>
    <script src="js/Ctrl_Cartoes.js"></script>
    <script src="js/Ctrl_Chat.js"></script>
    <script src="js/Ctrl_Config.js"></script>
    <script src="js/Ctrl_Dados.js"></script>
    <script src="js/Ctrl_Home.js"></script>
    <script src="js/Ctrl_LoginForm.js"></script>
    <script src="js/Ctrl_NovaSenha.js"></script>
    <script src="js/Ctrl_NovoCartao.js"></script>
    <script src="js/Ctrl_Promocoes.js"></script>
    <script src="js/Ctrl_Sidebar.js"></script>
    <script src="js/Dir_fileModel.js"></script>
    <script src="js/Service_Chat.js"></script>
    <script src="js/funcoes.js"></script>
    
  </head>
  <body ng-app="app" >

    <ion-nav-bar class="bar-royal">
      <ion-nav-back-button class="voltar">
        <i class="ion-chevron-left"></i> Voltar
      </ion-nav-back-button>
    </ion-nav-bar>

    <ion-nav-view></ion-nav-view>

    <script id="login" type="text/ng-template" >
      <ion-view title="Papudinho" class="login">
          <ion-nav-bar class="bar-positive"></ion-nav-bar> 
          <ion-content padding="true" class="has-header login">
              <div style="border: 0px; text-align: center; background-color: rgb(159,195,231);">
                  <img src='img/Papudim.png' width="150px" style="vertical-align: middle;" class="login">
              </div>

              <form ng-submit="submit()" ng-controller="LoginForm" class="login">
                  <div align="center" class="msg" id="msghome" ng-model="checked">
                    <ion-spinner icon="lines" class="spinner-stable" ng-show="checked"></ion-spinner>{{msg}}
                  </div>
                  <br>
                  <ion-list>
                      <label class="item item-input label-index">
                          <input id="usuario" name="usuario" type="email" placeholder="Usuário"  ng-model="email" >
                      </label>
                      <br>
                      <label class="item item-input label-index">
                          <input id="senha" name="senha" type="password" placeholder="Senha" ng-model="senha" >
                      </label>
                  </ion-list>
                  <button class="button  button-energized button-block ">
                    <i class="button button-icon icon ion-ios-checkmark-empty" ></i>Entrar
                  </button>
                  
                  <div align="center">
                    <a href="#/signup">Criar Conta</a>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  
                    <a href="#/senha">Esqueci a senha</a>
                  </div>
                  
              </form>
          </ion-content>
      </ion-view>
    </script>

    <script id="signup" type="text/ng-template">
    <ion-view title="Cadastro">
        <ion-content padding="true" class="has-header">

            <form ng-submit="submitcadastro()" ng-controller="CadastroForm">
                <ion-list>
                    <div align="center" class="msg" id="msgcadastro" ng-model="checked">
                      <ion-spinner icon="lines" class="spinner-calm" ng-show="checked"></ion-spinner>{{msg}}
                    </div>
                    <label class="item item-input">
                        <span class="input-label">Nome</span>
                        <input type="text" placeholder="" ng-model="user">
                    </label>
                    <label class="item item-input">
                        <span class="input-label">Email</span>
                        <input type="email" placeholder="" ng-model="email">
                    </label>
                    <label class="item item-input">
                        <span class="input-label">Celular</span>
                        <input type="text" placeholder="" ng-model="phone">
                    </label>
                    <label class="item item-input">
                        <span class="input-label">CPF</span>
                        <input type="text" placeholder="" ng-model="cpf">
                    </label>
                    <label class="item item-input">
                        <span class="input-label">Senha</span>
                        <input type="password" placeholder="" ng-model="password">
                    </label>
                    <label class="item item-input">
                        <span class="input-label">Confirmar Senha</span>
                        <input type="password" placeholder="" ng-model="password2">
                    </label>
                </ion-list>
                <input type="submit" id="submit" value="Cadastrar" class="button button-stable button-block" />
            </form>
        </ion-content>

    </ion-view>
    </script>

    <script id="senha" type="text/ng-template">
    <ion-view title="Esqueci a senha">
        <ion-content padding="true" class="has-header">

            <form ng-submit="submitsenha()" ng-controller="NovaSenha">
                <ion-list>
                    <div align="center" class="msg" id="msgsenha" ng-model="checked">
                      <ion-spinner icon="lines" class="spinner-calm" ng-show="checked"></ion-spinner>{{msg}}
                    </div>

                    <label class="item item-input">
                        <span class="input-label">Email</span>
                        <input type="email" placeholder="" ng-model="email">
                    </label>
                </ion-list>
                <input type="submit" id="submit" value="Nova senha" class="button button-stable button-block" />
            </form>
        </ion-content>

    </ion-view>
    </script>

    <script id="sideMenu" type="text/ng-template" >
      <ion-side-menus enable-menu-with-back-views="false">

        <ion-side-menu-content>
          <ion-nav-bar class="bar-positive">
            <ion-nav-buttons side="left">
              <button class="button button-icon button-clear ion-navicon" menu-toggle="left"></button>
            </ion-nav-buttons>
          </ion-nav-bar>

          <ion-nav-view name="menuContent"></ion-nav-view>
        </ion-side-menu-content> 

        <ion-side-menu side="left">
          <ion-header-bar class="bar-positive">
             <h1 class="title">Papudinho</h1>
          </ion-header-bar>
          <ion-content ng-controller="Sidebar">
            <ul class="list">
              <a href="#/menu/home" class="item" menu-close>Home</a>
              <a href="#/menu/amigos" class="item" menu-close>Amigos</a>
              <a href="#/menu/bares" class="item" menu-close>Bares</a>
              <a href="#/menu/cartoes" class="item" menu-close>Cartões</a>
              <a href="#/menu/promocao" class="item" menu-close>Promoções</a>
              <a href="#/menu/dados" class="item" menu-close>Meus Dados</a>
              <a href="#/menu/config" class="item" menu-close>Configurações</a>
              <a href="#/login" class="item" menu-close ng-click="sair()">Sair</a>
            </ul>
          </ion-content>
        </ion-side-menu>

      </ion-side-menus>
    </script>

    <script id="home" type="text/ng-template">
      <ion-view view-title="Papudinho" ng-controller="Home">
        <ion-content padding="true" class="has-header">
          <div align="center">{{msg}}</div>
          <div ng-repeat="cartao in CartoesVencimento">
            <div class="card">
              <div class="item item-text-wrap" >
                <p>
                  Bebida: {{ cartao.drink_name }} <br>
                  Bar:  {{ cartao.bar_name }}<br>
                  Doses restantes: {{ cartao.doses_restantes }} <br>
                  Vencimento: {{ cartao.due_date }} <br>
                </p>
              </div>
            </div>
          </div>
        </ion-content>
      </ion-view>
    </script>

    <script id="amigos" type="text/ng-template">
      <ion-view view-title="Amigos" ng-controller="Amigos">

        <ion-nav-bar class="bar-positive">
          <ion-nav-buttons side="left">
            <button class="button button-icon button-clear ion-navicon" menu-toggle="left"></button>
          </ion-nav-buttons>
          <ion-nav-buttons side="right">
            <a href="#/addAmigo" class="button button-icon icon ion-person-add"></a>
          </ion-nav-buttons>
        </ion-nav-bar>

        <ion-content padding="true" class="has-header">
          <div class="list">
            <div align="center" class="msg" id="msgamigos">{{msg}}</div>
            <a class="item item-icon-left item-icon-right" href="#/chat/{{amigo.user_id}}" ng-repeat="amigo in Amigos">
              <i class="icon ion-person-stalker"></i>
                ‎{{amigo.name}}<br>
                <small>{{amigo.phone}}</small>
              <i class="icon ion-ios7-telephone"></i>
            </a>

          </div>
        </ion-content>
      </ion-view>
    </script>


    <script id="bares" type="text/ng-template">
      <ion-view view-title="Bares" ng-controller="Bares">

        <ion-nav-bar class="bar-positive">
          <ion-nav-buttons side="left">
            <button class="button button-icon button-clear ion-navicon" menu-toggle="left"></button>
          </ion-nav-buttons>
        </ion-nav-bar>

        <ion-content padding="true" class="has-header">
          <a href="#/addBar" class="clearLink"> 
            <button class="button button-block button-stable">
              Sugerir bar
            </button>
          </a>
          <div class="list">
            <div ng-repeat="module in Bares">
             <a class="item item-thumbnail-left" href="#">
                <img src="{{ module.logo.thumb.url }}">
                <h2>{{ module.name }}</h2>
                <p>{{ module.city }} - {{ module.street }}, {{ module.number }}<br>
                {{ module.phone }}</p>
              </a>
            </div>
          </div>
        </ion-content>
      </ion-view>
    </script>

    <script id="cartoes" type="text/ng-template">
      <ion-view title="Cartões" ng-controller="Cartoes">

          <ion-nav-bar class="bar-positive">
            <ion-nav-buttons side="left">
              <button class="button button-icon button-clear ion-navicon" menu-toggle="left"></button>
            </ion-nav-buttons>
            <ion-nav-buttons side="right">
              <a href="#/addCartao" class="button button-icon icon ion-plus"></a>
            </ion-nav-buttons>
          </ion-nav-bar>
          <ion-content padding="true" class="has-header">
            <div class="list">
              <div align="center" class="msg" id="msgcartoes">{{msg}}</div>
              <div ng-repeat="module in Cartoes">

                <a class="item " >
                  <div class="row">
                    <div class="col">
                      <p><b>{{ module.bar_name }}</b><br>
                      {{ module.drink_name }}<br>
                      {{ module.total_doses }} doses totais</p>
                    </div>
                    <div class="col">
                      <p>{{ module.remaining_doses }} Doses restantes<br>
                      Venc: {{ module.due_date }}</p>
                    </div>
                  </div>
                </a>

              </div>
            </div>
          </ion-content>
      </ion-view>
    </script>

    <script id="promocao" type="text/ng-template">
      <ion-view title="Promoções" ng-controller="Promocoes">
          <ion-content padding="true" class="has-header">
            <div class=" card">
            <label class="item item-input">
              <input type="text" ng-model="search.bar_name" placeholder = "Pesquisar">
            </label>
            <div align="center" class="msg" id="msgpromocoes">{{msg}}</div>
              <div class="item item-text-wrap" ng-repeat="module in Promocoes | filter:search:strict">
                <h2>{{module.bar_name}}</h2>
                <h3>{{module.title}}</h3>
                <p>{{module.description}}<br>
                  Válido até {{module.date.replace("-", "/").replace("-", "/")}}</p>
              </div>
            </div>
          </ion-content>
      </ion-view>
    </script>

    <script id="dados" type="text/ng-template">
      <ion-view title="Meus dados">
          <ion-content padding="true" class="has-header">
            <div class=" card">
              <div class="item item-text-wrap">
                <form ng-submit="submitDados()" ng-controller="Dados">
                  <div align="center" class="msg" id="msgdados ">{{msg}}</div>
                  <label class="item item-input">
                      <span class="input-label">Nome</span>
                      <span>{{nome}}</span>
                  </label>
                  <label class="item item-input">
                      <span class="input-label">Email</span>
                      <span>{{email}}</span>
                  </label>
                  <label class="item item-input">
                      <span class="input-label">Senha Antiga</span>
                      <input type="password" placeholder="" ng-model="passwordOld">
                  </label>
                  <label class="item item-input">
                      <span class="input-label">Senha Nova</span>
                      <input type="password" placeholder="" ng-model="password">
                  </label>
                  <label class="item item-input">
                      <span class="input-label">Confirmar Senha Nova</span>
                      <input type="password" placeholder="" ng-model="password2">
                  </label>
                  <input type="submit" id="submit" value="Alterar senha" class="button button-stable button-block" />
                </form>
              </div>
            </div>
          </ion-content>
      </ion-view>
    </script>

    <script id="addCartao" type="text/ng-template">
      <ion-view view-title="Novo Cartão">

        <ion-nav-bar class="bar-positive" ng-controller="Back">
          <ion-nav-buttons side="left">
            <button class="button back-button buttons button-clear header-item" ng-click="myGoBack()">
              <i class="ion-chevron-left"></i> Voltar
            </button>
          </ion-nav-buttons>
        </ion-nav-bar>

        <ion-content padding="true" class="has-header">
          <form ng-controller="NovoCartao">
            <div align="center">{{msg}}</div>
            <div class="row">
              <div class="col">
                <label class="item item-input item-select">
                  <div class="input-label">
                    Bebida
                  </div>
                  <select ng-model="bebida" required>
                    <option selected > -- Escolha -- </option>
                    <option align="center"  ng-repeat="module in Bebidas" >{{module.name}} </option>
                  </select>
                </label>
              </div>
            </div>

            <div class="row">
              <div class="col"> 
                <label class="item item-input item-select">
                  <div class="input-label">
                    Bar
                  </div>
                  <select ng-model="bar" required>
                    <option selected> -- Escolha -- </option>
                    <option align="center" ng-repeat="module in Bares" >{{module.name}} </option>
                  </select>
                </label>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <label class="item item-input">
                  <span class="input-label">Data de Vencimento</span>
                  <input type="date" ng-model="vencimento" required>
                </label>
              </div>
            </div>

            <div class="row">
              <div class="col col-80">
                <div class="item range range-positive">
                  <input type="range" name="doses" min="0" max="20" value="1" ng-model="doses">
                </div>
              </div>
              <div class="col col-center" align="center">
                <p>Doses : {{doses}}</p>
              </div>
            </div>
            <br>
            <!--
            <div class="row">
              <img ng-src="{{imgURI}}" id="largeImage">
              <input  type="file" file-model="file"/>
              <button id="foto" class="button" ng-click="capturePhoto()" class="button button-stable">Tirar Foto</button>
            </div>-->
            
            
            <input type="submit" id="SalvarCartao" value="Salvar" ng-click="submitcartao()" class="button button-stable button-block" enctype="multipart/form-data" />
          </form>
        </ion-content>
      </ion-view>
    </script>

    <script id="addAmigo" type="text/ng-template">
      <ion-view view-title="Adicionar Amigo" >

        <ion-nav-bar class="bar-positive" ng-controller="Back">
          <ion-nav-buttons side="left">
            <button class="button back-button buttons button-clear header-item" ng-click="myGoBack()">
              <i class="ion-chevron-left"></i> Voltar
            </button>
          </ion-nav-buttons>
        </ion-nav-bar>

        <ion-content padding="true" class="has-header">
          <form ng-submit="submitamigo()" ng-controller="AddAmigo">
            <div align="center" class="msg" id="msgcadastro">{{msg}}</div>  
            <ion-list>
                <label class="item item-input">
                    <span class="input-label">Email</span>
                    <input type="email" placeholder="" ng-model="email" >
                </label>
            </ion-list>
            <input type="submit" id="SalvarAmigo" value="Salvar" class="button button-stable button-block" />
          </form>
        </ion-content>
      </ion-view>
    </script>

    <script id="addBar" type="text/ng-template">
      <ion-view view-title="Sugerir Bar" >

        <ion-nav-bar class="bar-positive" ng-controller="Back">
          <ion-nav-buttons side="left">
            <button class="button back-button buttons button-clear header-item" ng-click="myGoBack()">
              <i class="ion-chevron-left"></i> Voltar
            </button>
          </ion-nav-buttons>
        </ion-nav-bar>

        <ion-content padding="true" class="has-header">
          <form ng-submit="submitbar()" ng-controller="AddBar">
            <div align="center" class="msg" id="msgAddBar">{{msg}}</div>  
              <ion-list>
                <label class="item item-input">
                    <span class="input-label">Nome</span>
                    <input type="text" placeholder="" ng-model="nome" >
                </label>
                <label class="item item-input">
                    <span class="input-label">Telefone</span>
                    <input type="text" placeholder="" ng-model="tel" >
                </label>
                <label class="item item-input">
                    <span class="input-label">Endereço</span>
                    <input type="text" placeholder="" ng-model="endr" >
                </label>
                <label class="item item-input">
                    <span class="input-label">Email</span>
                    <input type="email" placeholder="" ng-model="email" >
                </label>
              </ion-list>
            <input type="submit" value="Sugerir" class="button button-stable button-block" />
          </form>
        </ion-content>
      </ion-view>
    </script>

    <script id="config" type="text/ng-template">
      <ion-view title="Configurações">
          <ion-content padding="true" class="has-header">
            <div class="card">
              <div class="item item-text-wrap">
                <form ng-controller="Config">
                  <div align="center" class="msg" id="msgconfig">{{msg}}</div>
                  <ul class="list">
                    <li class="item item-toggle">
                      Promoções de outros bares
                      <label class="toggle toggle-assertive">
                        <input type="checkbox">
                         <div class="track">
                           <div class="handle"></div>
                         </div>
                       </label>
                    </li>
                    <li class="item item-toggle">
                      GPS
                      <label class="toggle toggle-assertive">
                        <input type="checkbox">
                         <div class="track">
                           <div class="handle"></div>
                         </div>
                       </label>
                    </li>
                    <li class="item item-toggle">
                      Visibilidade pública
                      <label class="toggle toggle-assertive">
                        <input type="checkbox">
                         <div class="track">
                           <div class="handle"></div>
                         </div>
                       </label>
                    </li>
                  </ul>
                </form>
              </div>
            </div>
          </ion-content>
      </ion-view>
    </script>

    <script id="chat" type="text/ng-template" >
      <ion-view view-title="{{msg}}" >

        <ion-nav-bar class="bar-positive" ng-controller="Back">
          <ion-nav-buttons side="left">
            <button class="button back-button buttons button-clear header-item" ng-click="myGoBack()">
              <i class="ion-chevron-left"></i> Voltar
            </button>
          </ion-nav-buttons>
        </ion-nav-bar>

        <ion-content padding="true" class="has-header" ng-controller="Chat">
          <img ng-src="{{chat.face}}" style="width: 64px; height: 64px">
          <p>
            {{chat.lastText}}
          </p>
        </ion-content>
      </ion-view>
    </script>

  </body>
</html>
